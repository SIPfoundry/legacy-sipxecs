<?xml version="1.0" encoding="UTF-8"?>

<!-- DO NOT EDIT THIS FILE. It is generated by sipXconfig web ui -->
<nattraversal xmlns="http://www.sipfoundry.org/sipX/schema/xml/nattraversalrules-00-00">
#set($relay=${settings.getSettings().getSetting('relay-config')})
#set($nat=${settings.getSettings().getSetting('nat')})
  <info>
    <state>${nat.getSetting('enabled').Value}</state>
    <behindnat>${nat.getSetting('behind-nat').Value}</behindnat>
#if(${settings.behindNat})
#if(${location.useStun})
    <useSTUN>true</useSTUN>
    <stun-server-address>${location.stunAddress}</stun-server-address>
    <rediscovery-time>${location.stunInterval}</rediscovery-time>
#else
    <useSTUN>false</useSTUN>
    <publicaddress>${location.publicAddress}</publicaddress>
#end
#else
    <useSTUN>false</useSTUN>
#end
    <publicunsecureport>${location.publicPort}</publicunsecureport>
    <proxyunsecurehostport>${location.address}:${proxyTcpPort}</proxyunsecurehostport>
    <publicsecureport>${location.publicTlsPort}</publicsecureport>
    <proxysecurehostport>${location.address}:${proxyTlsPort}</proxysecurehostport>
    <mediarelayxml-rpc-port>${settings.xmlRpcPort}</mediarelayxml-rpc-port>
    <relayaggressiveness>${nat.getSetting('media-relay-temperament').Value}</relayaggressiveness>
    <mediarelaynativeaddress>${location.address}</mediarelaynativeaddress>
    <concurrentrelays>50</concurrentrelays>
    <port-range>${location.startRtpPort}:${location.stopRtpPort}</port-range>
    <log-directory>@SIPX_LOGDIR@</log-directory>
    <sipx-supervisor-host>${location.fqdn}</sipx-supervisor-host>
    <sipx-supervisor-xml-rpc-port>8092</sipx-supervisor-xml-rpc-port>
    <rejectStrayPackets>${nat.getSetting('reject-stray-packets').Value}</rejectStrayPackets>
    <secureXMLRPC>false</secureXMLRPC>
  </info>
  <localtopology>
#foreach($subnet in ${routes.subnets})
    <ipV4subnet>$subnet</ipV4subnet>
#end
#foreach($domain in ${routes.domains})
    <dnsWildcard>$domain</dnsWildcard>
#end
  </localtopology>
</nattraversal>
