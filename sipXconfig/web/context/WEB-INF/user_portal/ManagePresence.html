<div jwcid="@common/Border" restricted="false" useDojo="true">
  <h2>
    <span key="title"/>
  </h2>
  <p><span key="text">Sign-in or sign-out to presence server. Useful for peer-to-peer clients status
    notification or call distribution systems.</span></p>
  <span jwcid="@common/ErrorMsg"/>
  <div id="settings-content">
    <form jwcid="form@common/AutoRefreshForm" id="presence:form" actionBlock="ognl:actionBlock">
      <span jwcid="@If" condition="ognl:! presenceServer.enabled">
        <p class="user-error" id="presence-disabled"><span key="error">Presence server support is not enabled on your system.</span></p>
      </span>
      <span jwcid="@Else" id="status">
        <span jwcid="@If" condition="ognl:! signedIn">
          <p class="message"><span key="signed.out">You are currently signed out.</span></p>
        </span>
        <span jwcid="@Else">
          <p><strong><span key="signed.in">You are currently signed in.</span></strong></p>
        </span>
      </span>
      <ul jwcid="actions@Block">
        <li>
          <input jwcid="signInButton@tacos:AjaxSubmit" id="signInButton" value="message:button.SignIn"
            listener="ognl:tapestry.treatUserExceptionAsValidationError(beans.validator, listeners.signIn)"
            updateComponents="ognl:{'refreshedContent'}"
          />
          <input jwcid="signOutButton@tacos:AjaxSubmit" id="signOutButton" value="message:button.SignOut"
            listener="ognl:tapestry.treatUserExceptionAsValidationError(beans.validator, listeners.signOut)"
            updateComponents="ognl:{'refreshedContent'}"
          />
        </li>
      </ul>
    </form>
  </div>
</div>

