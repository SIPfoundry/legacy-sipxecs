<div jwcid="@common/Border" restricted="false">
  <h2><span key="title">User Phonebook</span></h2>
  <span jwcid="@common/ErrorMsg"/>
  <form jwcid="@common/ClickToCallPanel" delegate="bean:validator" user="ognl:user"/>
  <form jwcid="@Form" delegate="bean:validator">
    <fieldset>
      <table>
        <tr jwcid="@common/FieldPanel" for="userPhonebook:query"
          field="component:query"
          label="message:label.query"
          description="message:description.query">
          <td jwcid="query@TextField" id="userPhonebook:query"
            displayName="message:label.query"
            value="ognl:query"/>
        </tr>
      </table>
    </fieldset>
    <ul class="component-submit">
      <li>
        <input jwcid="@Submit" id="userPhonebook:search" value="message:button.search"
          action="listener:search" updateComponents="phonebook"/>
      </li>
      <li>
        <input jwcid="@Submit" id="userPhonebook:cancel" value="message:button.reset"
          action="listener:reset" updateComponents="phonebook, query"/>
      </li>
    </ul>
    <fieldset jwcid="phonebook@Any">
      <ul class="component-links">
        <li>
          <a jwcid="export@common/ExportLink" id="cdr:export" listener="listener:export">
             <span key="link.export">Export</span>
          </a>
        </li>
      </ul>
      <table jwcid="@common/Table" id="userPhonebook:phonebookTable"
        source="ognl:phonebookEntries"
        columns="* firstName,lastName,phoneNumber"
        row="ognl:phonebookEntry"
        usePager="ognl:true"
        volatile="ognl:true">
        <span jwcid="phoneNumberColumnValue@Block">
          <span jwcid="@ImageSubmit"
            image="asset:callIcon"
            title="message:tooltip.call"
            action="listener:call"
            parameters="ognl:currentNumber"
            asyn="ognl:true" />
          <span jwcid="@Insert" value="ognl:currentNumber"/>
        </span>
      </table>
    </fieldset>
  </form>
</div>
