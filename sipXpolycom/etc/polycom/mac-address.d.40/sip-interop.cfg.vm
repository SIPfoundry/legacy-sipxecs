<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<--   Generated by sipXecs: http://www.sipfoundry.org/

   Instructions for integrating new configuration file content into sipXconfig:
     http://wiki.sipfoundry.org/display/xecsdev/Adding+Polycom+SoundPoint+IP+New+Configuration+File+Content+into+sipXconfig
-->
<polycomConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="polycomConfig.xsd">
  <voIpProt>
   <local
## XX-6959: Generate with voIpProt.local.port for compatibility with pre-3.2.2 firmware.
#set ($sip_local_port = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('local').getSetting('port'))
      voIpProt.SIP.local.port="$!{sip_local_port.Value}"
    />
    <server
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.server.dhcp'))
#foreach ($setting in $cfg.getSettings($group))
      voIpProt.server.dhcp.${setting.ProfileName}="$!{setting.Value}"
#end
    />
    <SIP
#set ($failover = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('failover').getValue())
      voIpProt.SIP.tcpFastFailover="$!{failover}"
#set ($allow_Transfer_On_Proceeding = "2")
      voIpProt.SIP.allowTransferOnProceeding="$!{allow_Transfer_On_Proceeding}"
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('protocol'))
#foreach ($setting in $cfg.getSettings($group))
      voIpProt.SIP.${setting.ProfileName}="$!{setting.Value}"
#end
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('serverFeatureControl'))
#foreach ($setting in $cfg.getSettings($group))
      voIpProt.SIP.serverFeatureControl.${setting.ProfileName}="$!{setting.Value}"
#end
    >
      <outboundProxy
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt').getSetting('SIP.outboundProxy'))
#foreach ($setting in $cfg.getSettings($group))
        voIpProt.SIP.outboundProxy.${setting.ProfileName}="$!{setting.Value}"
#end
      />
      <alertInfo
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('alertInfo'))
#foreach ($subgroup in $group.Values)
#set ($parentProfileName = $subgroup.ProfileName)
#foreach ($setting in $subgroup.Values)
        voIpProt.SIP.alertInfo.${parentProfileName}.${setting.ProfileName}="$!{setting.Value}"
#end
#end
      />
      <requestValidation
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('requestValidation'))
#foreach ($subgroup in $group.Values)
#set ($parentProfileName = $subgroup.ProfileName)
#foreach ($setting in $subgroup.Values)
        voIpProt.SIP.requestValidation.${parentProfileName}.${setting.ProfileName}="$!{setting.Value}"
#end
#end
      >
        <digest
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('digest'))
#foreach ($setting in $cfg.getRecursiveSettings($group))
          voIpProt.SIP.requestValidation.digest.${setting.ProfileName}="$!{setting.Value}"
#end
        />
      </requestValidation>
      <specialEvent
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('specialEvent'))
#foreach ($setting in $cfg.getSettings($group))
        voIpProt.SIP.specialEvent.${setting.ProfileName}="$!{setting.Value}"
#end
      />
      <conference
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('conference'))
#foreach ($setting in $cfg.getSettings($group))
        voIpProt.SIP.conference.${setting.ProfileName}="$!{setting.Value}"
#end
      />
      <dialog
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('dialog'))
#foreach ($setting in $cfg.getSettings($group))
        voIpProt.SIP.dialog.${setting.ProfileName}="$!{setting.Value}"
#end
      />
      <connectionReuse
#set ($group = $cfg.EndpointSettings.getSetting('voIpProt.SIP').getSetting('connectionReuse'))
#foreach ($setting in $cfg.getSettings($group))
        voIpProt.SIP.connectionReuse.${setting.ProfileName}="$!{setting.Value}"
#end
      />
    </SIP>
  </voIpProt>
  <tone>
    <DTMF
#set ($group = $cfg.EndpointSettings.getSetting('tone.dtmf'))
#foreach ($setting in $cfg.getSettings($group))
      tone.dtmf.${setting.ProfileName}="$!{setting.Value}"
#end
    />
  </tone>
<se>
<se.rt>
##    <!-- Ring classes 3 and 4 are used by the Intercom feature -->
#set ($ringAnswer = $cfg.EndpointSettings.getSetting('se/ringType/RING_ANSWER'))
      <se.rt.ringAutoAnswer
        se.rt.ringAutoAnswer.name="Ring Answer"
        se.rt.ringAutoAnswer.type="ring-answer"
        se.rt.ringAutoAnswer.timeout="$!{ringAnswer.getSetting('timeout').Value}"
        se.rt.ringAutoAnswer.ringer="$!{ringAnswer.getSetting('ringer').Value}"
        se.rt.ringAutoAnswer.callWait="$!{ringAnswer.getSetting('callWait').Value}"
        se.rt.ringAutoAnswer.mod="$!{ringAnswer.getSetting('mod').Value}"
      />
</se.rt>
</se>
<call
#foreach ($setting in ${call})
    call.${setting.ProfileName}="$!{setting.Value}"
#end
    call.stickyAutoLineSeize=""
    call.stickyAutoLineSeize.onHookDialing=""
  >
    <call.shared
#set ($group = $cfg.EndpointSettings.getSetting('call').getSetting('shared'))
#foreach ($setting in $cfg.getSettings($group))
      call.shared.${setting.ProfileName}="$!{setting.Value}"
#end
    />
    <call.hold>
      <call.hold.localReminder
#set ($group = $cfg.EndpointSettings.getSetting('call.hold.localReminder'))
#foreach ($setting in $cfg.getSettings($group))
        call.hold.localReminder.${setting.ProfileName}="$!{setting.Value}"
#end
      />
    </call.hold>
  </call>
  <sec>
  <sec.srtp
#set ($group = $cfg.EndpointSettings.getSetting('sec').getSetting('srtp'))
#foreach ($setting in $cfg.getSettings($group))
      sec.srtp.${setting.ProfileName}="$!{setting.Value}"
#end
    />
  </sec>
  <request>
    <request.delay
#set ($group = $cfg.EndpointSettings.getSetting('request.delay'))
#foreach ($setting in $cfg.getSettings($group))
      request.delay.${setting.ProfileName}="$!{setting.Value}"
#end
    />
  </request>

#if ($phone.model.modelId == "polycom7000")
  <pnet
#set ($group = $cfg.EndpointSettings.getSetting('pnet'))
#foreach ($setting in $cfg.getSettings($group))
      pnet.${setting.ProfileName}="$!{setting.Value}"
#end
  />
#end

#foreach ($line in ${lines})
#set ($i = $velocityCount)
<reg
  reg.${i}.proxyRequire=""
/>
#end
  <msg
#set ($group = $cfg.EndpointSettings.getSetting('msg'))
#foreach ($setting in $cfg.getSettings($group))
    msg.${setting.ProfileName}="$!{setting.Value}"
#end
  />
  
  <nat
#set ($group = $cfg.EndpointSettings.getSetting('nat'))
#foreach ($setting in $cfg.getSettings($group))
    nat.${setting.ProfileName}="$!{setting.Value}"
#end
  />

</polycomConfig>