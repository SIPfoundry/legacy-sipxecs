<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<routes>
  <route mappingType="local">
    <routeFrom>${SIPXCHANGE_DOMAIN_NAME}:${PROXY_SERVER_SIP_PORT}</routeFrom>
    <routeFrom>${MY_IP_ADDR}:${PROXY_SERVER_SIP_PORT}</routeFrom>
    <routeFrom>${MY_FULL_HOSTNAME}:${PROXY_SERVER_SIP_PORT}</routeFrom>
    <routeFrom>${MY_HOSTNAME}:${PROXY_SERVER_SIP_PORT}</routeFrom>

    <methodMatch>
      <methodPattern>SUBSCRIBE</methodPattern>

      <!-- Message waiting indication events -->
      <fieldMatch fieldName="Event">
        <fieldPattern>message-summary.*</fieldPattern>
        <!--this goes to the status server-->
        <routeTo>&lt;${STATUS_SERVER_SIP_SRV_OR_HOSTPORT};transport=tcp&gt;</routeTo>
      </fieldMatch>

      <!-- All other SUBSCRIBE requests go to the SIP registry service -->
      <routeTo>&lt;${REGISTRAR_SERVER_SIP_SRV_OR_HOSTPORT}&gt;</routeTo>

    </methodMatch>

    <!-- All other requests go to the SIP registry service -->
    <routeTo>&lt;${REGISTRAR_SERVER_SIP_SRV_OR_HOSTPORT}&gt;</routeTo>

  </route>
</routes>

