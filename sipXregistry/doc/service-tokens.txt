Internally-generated URI user-parts are allocated according to this
scheme:

   ~~xx~arbitrary

where "xx" is a two-letter code specifying the sipX facility that is
responsible for allocating the user-part, and "arbitrary" is an
arbitrary string allocated by the facility (within the valid syntax
for SIP URI user-parts).

External and user-driven URI allocation methods are forbidden to
allocate URIs (within the domains that sipX is authoritative for) that
begin with "~~".

The assigned facility codes are:

*** gr => GRUUs and similar URIs.

   ~~gr~xxxxxxxxxxxxxxxx
      Where "xxxxxxxxxxxxxxxx" is a 64-bit hex number
      generated by GRUU assignment.

   Translated internally by sipregistrar to the destination
   contact.

*** id => Service Identities

   There are times when a sipXecs service needs to authenticate itself
   with an identity that will be accepted by other components.  For
   example, when the TransferControl AuthPlugin is being used, any
   REFER for a blind transfer must be authenticated so that the
   identity of the transfering party can be used for authorization
   decisions when the resulting INVITE is evaluated.  Any sipXecs
   service that needs an identity gets one in this prefix group.
   Allocated so far are:

      ~~id~acd  -> the ACD
      ~~id~park  -> the park server
      ~~id~media -> the media server
      ~~id~sipXrls -> the RLS
      ~~id~bridge -> sipXbridge
      ~~id~registrar -> sipXregistry (for use by redirectors that need to
			send SUBSCRIBEs)

*** mh => The music-on-hold source.

   ~~mh~
      The default music-on-hold source.  In the standard
      configuration, it is sip:moh@(domain):5120.

   Translated by mappingrules.xml to a contact at sipxpark.
   The mappingrules entry is generated by Config Server when the
   dial plan is activated.

*** rl => Resource-list URIs.  (See RFC 4662.)

   ~~rl~xxx

   Translated by mappingrules.xml into a contact at sipxrls.
   The mappingrules entry is generated by Config Server when the
   dial plan is activated.

   The current assignments are:
      ~~rl~F~[user name] -> full RFC 4662 resource list
      ~~rl~C~[user name] -> Broadworks-format resource list
      ~~rl~D~[something] -> for debugging requests

   Of the debugging group, there is currently one assignment:
      ~~rl~D~dumpstate
         When sipxrls receives a MESSAGE with this user-part, it
         writes its state into its log (at INFO level).

*** sp => Special-purpose URIs

   ~~sp~xxx
      Where "xxx" is a string assigned to a specific purpose.

   Used for creating individual URIs for various purposes.
   Currently defined URIs:
      ~~sp~allcredentials
         Forks to all users which have credentials.
	 (Formerly, "*allcredentials" was used for this purpose.)

*** vm => Voice Mailbox Deposit URI

   ~~vm~U
      Where 'U' is the user part of the AOR of the user (for any
      user who has a Voice Mailbox).  This provides an
      abstract way to refer to 'the voice mailbox of user U'.

   Translated to the actual voicemail URI by mappingrules.xml in a
   clause inserted whenever the installation has a voicemail server.
   In theory, there may be more than one translation if different
   users have mailboxes at different servers.

   For the default voicemail application, this translation is:

    <userMatch>
      <description>Abstract Voice Mailbox Deposit URI (reserved by sipXecs)</description>
      <userPattern>~~vm~.</userPattern>
      <permissionMatch>
        <transform>
          <url>&lt;sip:{vdigits}@{mediaserver};voicexml={voicemail}%2Fcgi-bin%2Fvoicemail%2Fmediaserver.cgi%3Faction%3Ddeposit%26mailbox%3D{vdigits-escaped}&gt;</url>
        </transform>
      </permissionMatch>
    </userMatch>

   The {mediaserver} and {voicemail} tokens could (should, really) be
   pre-expanded by the configuration server when it creates the file.
